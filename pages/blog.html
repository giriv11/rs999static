<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Latest insights, tips, and news about web design, development, and digital marketing from Rs999 Web Services.">
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
  <meta http-equiv="Pragma" content="no-cache">
  <meta http-equiv="Expires" content="0">
  <title>Blog | Rs999 Web Services</title>
  
  <link href="../assets/css/output.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
</head>
<body class="bg-gray-50">

  <div id="header"></div>

  <!-- Page Header -->
  <section class="bg-gradient-to-r from-primary-600 to-primary-800 text-white py-16">
    <div class="container mx-auto px-4 text-center">
      <h1 class="text-4xl md:text-5xl font-bold mb-4">Rs999 Blog</h1>
      <p class="text-xl text-primary-100">Latest insights and news from our experts</p>
    </div>
  </section>

  <!-- Blog Grid -->
  <section class="py-20">
    <div class="container mx-auto px-4">
      <!-- Debug Info & Refresh Button -->
      <div class="bg-blue-50 border border-blue-200 rounded-lg p-4 mb-8 flex items-center justify-between">
        <div class="flex items-center space-x-4">
          <div class="text-sm text-blue-800">
            <span class="font-semibold">Posts loaded:</span> <span id="posts-count">Loading...</span>
            <span class="mx-2">•</span>
            <span class="font-semibold">Last updated:</span> <span id="last-updated">-</span>
          </div>
        </div>
        <button onclick="location.reload(true)" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm font-semibold flex items-center">
          <i class="fas fa-sync-alt mr-2"></i> Force Refresh
        </button>
      </div>
      
      <div class="grid lg:grid-cols-3 gap-8">
        
        <!-- Main Content -->
        <div class="lg:col-span-2">
          <div class="space-y-8">
            <!-- Posts will be dynamically loaded here by JavaScript -->
            <div class="text-center py-12">
              <i class="fas fa-spinner fa-spin text-4xl text-primary-600 mb-4"></i>
              <p class="text-gray-600">Loading blog posts...</p>
            </div>

          </div>

          <!-- Pagination -->
          <div id="pagination" class="flex justify-center mt-12">
            <!-- Pagination buttons will be generated here -->
          </div>
        </div>

        <!-- Sidebar -->
        <div class="lg:col-span-1">
          
          <!-- Search Widget -->
          <div class="card p-6 mb-8">
            <h3 class="text-xl font-bold text-gray-800 mb-4">Search</h3>
            <div class="relative">
              <input type="text" placeholder="Search articles..." class="w-full px-4 py-3 pr-12 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent">
              <button class="absolute right-3 top-3 text-primary-600 hover:text-primary-700">
                <i class="fas fa-search text-xl"></i>
              </button>
            </div>
          </div>

          <!-- Categories Widget -->
          <div class="card p-6 mb-8">
            <h3 class="text-xl font-bold text-gray-800 mb-4">Categories</h3>
            <ul class="space-y-3">
              <li><a href="#" class="flex items-center justify-between text-gray-700 hover:text-primary-600 transition-colors"><span>Web Design</span><span class="bg-gray-200 px-2 py-1 rounded text-sm">28</span></a></li>
              <li><a href="#" class="flex items-center justify-between text-gray-700 hover:text-primary-600 transition-colors"><span>eCommerce</span><span class="bg-gray-200 px-2 py-1 rounded text-sm">15</span></a></li>
              <li><a href="#" class="flex items-center justify-between text-gray-700 hover:text-primary-600 transition-colors"><span>SEO</span><span class="bg-gray-200 px-2 py-1 rounded text-sm">22</span></a></li>
              <li><a href="#" class="flex items-center justify-between text-gray-700 hover:text-primary-600 transition-colors"><span>Digital Marketing</span><span class="bg-gray-200 px-2 py-1 rounded text-sm">18</span></a></li>
              <li><a href="#" class="flex items-center justify-between text-gray-700 hover:text-primary-600 transition-colors"><span>Mobile Apps</span><span class="bg-gray-200 px-2 py-1 rounded text-sm">12</span></a></li>
            </ul>
          </div>

          <!-- Recent Posts Widget -->
          <div class="card p-6 mb-8">
            <h3 class="text-xl font-bold text-gray-800 mb-4">Recent Posts</h3>
            <div class="space-y-4">
              <div class="flex space-x-3">
                <div class="w-16 h-16 bg-primary-600 rounded flex-shrink-0"></div>
                <div>
                  <a href="#" class="text-gray-800 font-semibold hover:text-primary-600 text-sm line-clamp-2">Essential Web Design Trends for 2025</a>
                  <p class="text-xs text-gray-500 mt-1">Oct 10, 2025</p>
                </div>
              </div>
              <div class="flex space-x-3">
                <div class="w-16 h-16 bg-green-600 rounded flex-shrink-0"></div>
                <div>
                  <a href="#" class="text-gray-800 font-semibold hover:text-primary-600 text-sm line-clamp-2">How to Choose the Right CMS</a>
                  <p class="text-xs text-gray-500 mt-1">Oct 8, 2025</p>
                </div>
              </div>
              <div class="flex space-x-3">
                <div class="w-16 h-16 bg-orange-600 rounded flex-shrink-0"></div>
                <div>
                  <a href="#" class="text-gray-800 font-semibold hover:text-primary-600 text-sm line-clamp-2">Mobile-First Design Strategies</a>
                  <p class="text-xs text-gray-500 mt-1">Oct 5, 2025</p>
                </div>
              </div>
            </div>
          </div>

          <!-- Tags Widget -->
          <div class="card p-6">
            <h3 class="text-xl font-bold text-gray-800 mb-4">Popular Tags</h3>
            <div class="flex flex-wrap gap-2">
              <a href="#" class="bg-gray-200 hover:bg-primary-600 hover:text-white px-3 py-1 rounded-full text-sm transition-colors">Website Design</a>
              <a href="#" class="bg-gray-200 hover:bg-primary-600 hover:text-white px-3 py-1 rounded-full text-sm transition-colors">SEO</a>
              <a href="#" class="bg-gray-200 hover:bg-primary-600 hover:text-white px-3 py-1 rounded-full text-sm transition-colors">eCommerce</a>
              <a href="#" class="bg-gray-200 hover:bg-primary-600 hover:text-white px-3 py-1 rounded-full text-sm transition-colors">WordPress</a>
              <a href="#" class="bg-gray-200 hover:bg-primary-600 hover:text-white px-3 py-1 rounded-full text-sm transition-colors">Marketing</a>
              <a href="#" class="bg-gray-200 hover:bg-primary-600 hover:text-white px-3 py-1 rounded-full text-sm transition-colors">Mobile App</a>
              <a href="#" class="bg-gray-200 hover:bg-primary-600 hover:text-white px-3 py-1 rounded-full text-sm transition-colors">Development</a>
            </div>
          </div>

        </div>
      </div>
    </div>
  </section>

  <div id="footer"></div>

  <script src="../assets/js/header.js"></script>
  <script src="../assets/js/footer.js"></script>
  <script src="../assets/js/main.js"></script>
  
  <script>
    // Pagination configuration
    const POSTS_PER_PAGE = 6;
    let allPosts = [];
    let currentPage = 1;
    
    // Get page number from URL
    function getPageFromURL() {
      const urlParams = new URLSearchParams(window.location.search);
      return parseInt(urlParams.get('page')) || 1;
    }
    
    // Update URL with page number
    function updateURL(page) {
      const url = new URL(window.location);
      url.searchParams.set('page', page);
      window.history.pushState({}, '', url);
    }
    
    // Load blog posts dynamically from posts/index.json
    async function loadBlogPosts() {
      try {
        // Add cache-busting parameter to ensure fresh data
        const cacheBuster = Date.now();
        const response = await fetch(`../posts/index.json?t=${cacheBuster}`);
        allPosts = await response.json();
        
        // Update debug info
        document.getElementById('posts-count').textContent = allPosts.length;
        document.getElementById('last-updated').textContent = new Date().toLocaleTimeString();
        
        currentPage = getPageFromURL();
        
        if (allPosts.length === 0) {
          document.querySelector('.lg\\:col-span-2 .space-y-8').innerHTML = 
            '<p class="text-center text-gray-600 py-12">No blog posts yet. Check back soon!</p>';
          return;
        }
        
        renderPage(currentPage);
        renderPagination();
        
        console.log(`✅ Loaded ${allPosts.length} blog posts at ${new Date().toLocaleTimeString()}`);
        
      } catch (error) {
        console.error('Error loading blog posts:', error);
        document.querySelector('.lg\\:col-span-2 .space-y-8').innerHTML = 
          '<p class="text-center text-red-600 py-12">Error loading blog posts. Please try again later.</p>';
      }
    }
    
    // Render posts for current page
    function renderPage(page) {
      const blogContainer = document.querySelector('.lg\\:col-span-2 .space-y-8');
      const startIndex = (page - 1) * POSTS_PER_PAGE;
      const endIndex = startIndex + POSTS_PER_PAGE;
      const postsToShow = allPosts.slice(startIndex, endIndex);
      
      if (postsToShow.length === 0) {
        blogContainer.innerHTML = '<p class="text-center text-gray-600 py-12">No posts on this page.</p>';
        return;
      }
      
      blogContainer.innerHTML = postsToShow.map(post => `
        <div class="card overflow-hidden group">
          <div class="md:flex">
            <div class="md:w-1/3 h-64 md:h-auto overflow-hidden">
              <img src="${post.image || 'https://images.unsplash.com/photo-1499750310107-5fef28a66643?w=800&h=400&fit=crop'}" 
                   alt="${post.title}" 
                   class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-500"
                   onerror="this.src='https://images.unsplash.com/photo-1499750310107-5fef28a66643?w=800&h=400&fit=crop'">
            </div>
            <div class="md:w-2/3 p-6">
              <div class="flex items-center text-sm text-gray-500 mb-3">
                <i class="far fa-calendar mr-2"></i> ${new Date(post.date).toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' })}
                <span class="mx-2">•</span>
                <i class="far fa-user mr-2"></i> Rs999 Team
                <span class="mx-2">•</span>
                <i class="far fa-folder mr-2"></i> ${post.category || 'Uncategorized'}
              </div>
              <h2 class="text-2xl font-bold text-gray-800 mb-3 hover:text-primary-600 transition-colors">
                <a href="../post.html?slug=${post.slug}">${post.title}</a>
              </h2>
              <p class="text-gray-600 mb-4">
                ${post.excerpt}
              </p>
              <a href="../post.html?slug=${post.slug}" class="text-primary-600 font-semibold hover:text-primary-700 transition-colors inline-flex items-center">
                Read More <i class="fas fa-arrow-right ml-2"></i>
              </a>
            </div>
          </div>
        </div>
      `).join('');
      
      // Scroll to top smoothly
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }
    
    // Render pagination buttons
    function renderPagination() {
      const totalPages = Math.ceil(allPosts.length / POSTS_PER_PAGE);
      const paginationContainer = document.getElementById('pagination');
      
      if (totalPages <= 1) {
        paginationContainer.innerHTML = '';
        return;
      }
      
      let paginationHTML = '<div class="flex space-x-2">';
      
      // Previous button
      if (currentPage > 1) {
        paginationHTML += `
          <button onclick="goToPage(${currentPage - 1})" 
            class="px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors font-semibold">
            <i class="fas fa-chevron-left"></i>
          </button>
        `;
      }
      
      // Page numbers
      const maxVisiblePages = 5;
      let startPage = Math.max(1, currentPage - Math.floor(maxVisiblePages / 2));
      let endPage = Math.min(totalPages, startPage + maxVisiblePages - 1);
      
      if (endPage - startPage < maxVisiblePages - 1) {
        startPage = Math.max(1, endPage - maxVisiblePages + 1);
      }
      
      // First page + ellipsis
      if (startPage > 1) {
        paginationHTML += `
          <button onclick="goToPage(1)" 
            class="px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors font-semibold">
            1
          </button>
        `;
        if (startPage > 2) {
          paginationHTML += '<span class="px-2 py-2 text-gray-500">...</span>';
        }
      }
      
      // Page numbers
      for (let i = startPage; i <= endPage; i++) {
        if (i === currentPage) {
          paginationHTML += `
            <button class="px-4 py-2 bg-primary-600 text-white rounded-lg font-semibold">
              ${i}
            </button>
          `;
        } else {
          paginationHTML += `
            <button onclick="goToPage(${i})" 
              class="px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors font-semibold">
              ${i}
            </button>
          `;
        }
      }
      
      // Last page + ellipsis
      if (endPage < totalPages) {
        if (endPage < totalPages - 1) {
          paginationHTML += '<span class="px-2 py-2 text-gray-500">...</span>';
        }
        paginationHTML += `
          <button onclick="goToPage(${totalPages})" 
            class="px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors font-semibold">
            ${totalPages}
          </button>
        `;
      }
      
      // Next button
      if (currentPage < totalPages) {
        paginationHTML += `
          <button onclick="goToPage(${currentPage + 1})" 
            class="px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors font-semibold">
            <i class="fas fa-chevron-right"></i>
          </button>
        `;
      }
      
      paginationHTML += '</div>';
      
      // Add page info
      paginationHTML += `
        <div class="text-center mt-4 text-sm text-gray-600">
          Showing ${(currentPage - 1) * POSTS_PER_PAGE + 1} to ${Math.min(currentPage * POSTS_PER_PAGE, allPosts.length)} of ${allPosts.length} posts
        </div>
      `;
      
      paginationContainer.innerHTML = paginationHTML;
    }
    
    // Navigate to a specific page
    function goToPage(page) {
      currentPage = page;
      updateURL(page);
      renderPage(page);
      renderPagination();
    }
    
    // Handle browser back/forward
    window.addEventListener('popstate', function() {
      currentPage = getPageFromURL();
      renderPage(currentPage);
      renderPagination();
    });
    
    // Load posts when page loads
    document.addEventListener('DOMContentLoaded', loadBlogPosts);
  </script>
</body>
</html>
